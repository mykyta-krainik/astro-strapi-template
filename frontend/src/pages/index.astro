---
import Layout from '../layouts/Layout.astro';
import BookC from '../components/Book.astro';
import fetchApi from '../lib/strapi';
import type Book from '../interfaces/Book';

const books = await fetchApi<Book[]>({
  endpoint: 'books',
  wrappedByKey: 'data',
});
---
 
<Layout title="Welcome to astro-strapi plugin">
  <main class="mx-40 my-20">
    {books.map((book) => (
      <BookC {...book.attributes} />
    ))}
  </main>
</Layout>
